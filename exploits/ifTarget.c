#include<stdio.h>
#include<stdlib.h>
#include<pthread.h>
typedef int (*funcType)();
int good(char *content){
    printf("%s\n", content);
}

struct Target
{
    int flag;
    int pad;
    funcType fp;
};

int expire;
struct Target* sp;
char *buf[30];

struct Target* fpModify(){
    

    if(expire){
        sp->flag = 0;
        // sp->pad = 3;
        sp->fp = NULL;
    }else{
        sp->flag = 1;
        // sp->pad = 2;
        sp->fp = good;
    }

}

void changeExpire(){
    expire = 1;
}

int main(){
    sp = (struct Target*)malloc(sizeof(struct Target));
    
    pthread_t t1,t2;
    pthread_create(&t1, NULL, (void*)fpModify, NULL);
    pthread_create(&t2, NULL, (void*)changeExpire, NULL);
    if(sp->flag){
        sp->fp("no problem");
    }
}